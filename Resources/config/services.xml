<?xml version="1.0" encoding="UTF-8" ?>
<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services
        http://symfony.com/schema/dic/services/services-1.0.xsd">

    <parameters>
        <!-- TODO: Add you parameters here -->
        <parameter key="survos_location.bar" />
        <parameter key="survos_location.integer_foo" />
        <parameter key="survos_location.integer_bar" />
    </parameters>

    <services>
        <!-- Services -->
        <service class="Survos\LocationBundle\Repository\LocationRepository" id="survos_location.repository.location_repository" >
            <argument key="$registry" type="service" id="doctrine.orm.survos_location_entity_manager"/>
        </service>

        <service class="Survos\LocationBundle\Service\CountryImport" id="survos_location.country_import" >
            <argument key="$registry" type="service" id="Doctrine\Common\Persistence\ManagerRegistry"/>
        </service>
        <service class="Survos\LocationBundle\Service\AdministrativeImport" id="survos_location.service.administrative_import" >
            <argument key="$registry" type="service" id="Doctrine\Common\Persistence\ManagerRegistry"/>
        </service>

        <service id="survos_location.service" class="Survos\LocationBundle\Service\Service">
            <!-- TODO: Add your service constructor parameters here -->
            <argument key="$em" type="service" id="doctrine.orm.entity_manager"/>
            <argument key="$token" type="service" id="security.token_storage"/>
            <argument key="$requestStack" type="service" id="request_stack"/>
            <argument key="$translator" type="service" id="translator"/>
            <argument key="$bar" type="string">%survos_location.bar%</argument>
            <argument key="$integerFoo" type="string">%survos_location.integer_foo%</argument>
            <argument key="$integerBar" type="string">%survos_location.integer_bar%</argument>
        </service>

        <!-- TODO: Add the alias for your services here -->
        <service id="Survos\LocationBundle\Service\Service" alias="survos_location.service" />
        <service id="Survos\LocationBundle\Repository\LocationRepository" alias="survos_location.repository.location_repository" />
        <!-- End Services -->

        <!-- Controllers -->
        <service id="survos_location.controller"
                 autowire="true"
                 class="Survos\LocationBundle\Controller\SurvosLocationController" public="true">
            <argument key="$service" type="service" id="survos_location.service"/>
            <tag name="container.service_subscriber" />
            <tag name="controller.service_arguments" />
        </service>
        <service id="Survos\LocationBundle\Controller\SurvosLocationController" alias="survos_location.controller" public="true" />

        <!--  commands -->
        <service id="survos_location.load_command" class="Survos\LocationBundle\Command\LoadCommand" public="true">
            <argument key="$registry" type="service" id="Doctrine\Common\Persistence\ManagerRegistry"/>
            <tag name="console.command" />
        </service>

        <service id="survos_location.command.import_geonames_command" class="Survos\LocationBundle\Command\ImportGeonamesCommand" public="true">
            <argument type="service" id="parameter_bag" />
            <argument type="service" id="survos_location.country_import" />
            <argument type="service" id="survos_location.service.administrative_import" />
            <tag name="console.command" />
        </service>

        <!-- End Controller -->
    </services>
</container>
